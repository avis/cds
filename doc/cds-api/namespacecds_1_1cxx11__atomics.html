<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>cds: cds::cxx11_atomics Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cds
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecds.html">cds</a></li><li class="navelem"><a class="el" href="namespacecds_1_1cxx11__atomics.html">cxx11_atomics</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">cds::cxx11_atomics Namespace Reference<div class="ingroups"><a class="el" href="group__cds__cxx11__stdlib__wrapper.html">New C++11 standard library support</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>C++11 Atomic library support.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>C++11 Atomic library support. </p>
<p><b>libcds</b> has an implementation of C++11 atomic library (header <code>&lt;cds/cxx11_atomic.h&gt;</code>) specified in <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf">N3242, p.29</a>.</p>
<p>This implementation has full support</p>
<ul>
<li><code>atomic&lt;T&gt;</code> class and its specializations for integral types and pointers</li>
<li><code>atomic_flag</code> class</li>
<li>free <code>atomic_xxx</code> functions</li>
</ul>
<p>Exclusions: the following features specified in C++11 standard are not implemented:</p>
<ul>
<li>Atomic emulation. The library implements only genuine atomic operations for supported processors</li>
<li>Static initialization macros (like <code>ATOMIC_FLAG_INIT</code> and others)</li>
<li><code>atomic_init</code> functions</li>
</ul>
<p>The library supports the following processor architectures:</p>
<ul>
<li>Intel and AMD x86 (32bit) and amd64 (64bit)</li>
<li>Intel Itanium IA64 (64bit)</li>
<li>UltraSparc (64bit)</li>
</ul>
<p>Internal atomic implementation is used when the standard library provided by compiler has no <code>&lt;atomic&gt;</code> header or it is not standard compliant. The library defines <code>CDS_ATOMIC</code> macro that specifies atomic library namespace:</p>
<ul>
<li><code>std</code> for compiler-provided <code>&lt;atomic&gt;</code> library</li>
<li><code>cds::cxx11_atomic</code> if internal atomic implementation used</li>
</ul>
<p>Using <code>CDS_ATOMIC</code> macro you may call <code>&lt;atomic&gt;</code> library functions and classes, for example: </p>
<div class="fragment"><div class="line">CDS_ATOMIC::atomic&lt;int&gt; atomInt ;</div>
<div class="line">CDS_ATOMIC::atomic_store_explicit( &amp;atomInt, 0, CDS_ATOMIC::memory_order_release ) ;</div>
</div><!-- fragment --><dl class="section user"><dt>Microsoft Visual C++</dt><dd></dd></dl>
<p>MS Visual C++ has native <code>&lt;atomic&gt;</code> header beginning from Visual C++ 11 RC. The <code>libcds</code> library defines <code>CDS_ATOMIC</code> as</p>
<ul>
<li><code>cds::cxx11_atomic</code> (internal implementation) for MS VC++ 2008 and 2010</li>
<li><code>std</code> for MS VC++ 11 and above.</li>
</ul>
<dl class="section user"><dt>GCC</dt><dd></dd></dl>
<p>For GCC compiler the macro <code>CDS_ATOMIC</code> is defined as:</p>
<ul>
<li><code>cds::cxx11_atomic</code> by default</li>
<li><code>std</code> if the compiler version is 4.6 and <code>CDS_CXX11_ATOMIC_GCC</code> is defined (see below)</li>
<li><code>std</code> for GCC 4.7 and above</li>
</ul>
<p>GCC team implements full support for C++ memory model in version 4.7 (see <a href="http://gcc.gnu.org/wiki/Atomic/GCCMM">http://gcc.gnu.org/wiki/Atomic/GCCMM</a>). <code>libcds</code> uses its own implementation of C++11 <code>&lt;atomic&gt;</code> library located in file <code>&lt;cds/cxx11_atomic.h&gt;</code> for GCC version up to 4.6. This implementation almost conforms to C++11 standard draft <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf">N3242</a> (see exclusions above) that is closest to final version. However, GCC 4.6 has the implementation of <code>&lt;atomic&gt;</code> header in its <code>libstdc++</code> that is built on <code>__sync_xxx</code> (or <code>__atomic_xxx</code>) built-in functions. You can use <b>libcds</b> with GCC 4.6 <code>&lt;atomic&gt;</code> specifying <code>CDS_CXX11_ATOMIC_GCC</code> macro in g++ command line: </p>
<div class="fragment"><div class="line">g++ -DCDS_CXX11_ATOMIC_GCC ... </div>
</div><!-- fragment --><p> GCC 4.6 atomic implementation does not support <code>atomic&lt;T&gt;</code> for <b>any</b> <code>T</code>. The linker generates "undefined symbol" error for <code>atomic&lt;T&gt;</code> if <code>T</code> is not an integral type or a pointer. It is not essential for intrusive and non-intrusive containers represented in <code>libcds</code>. However, <a class="el" href="namespacecds_1_1memory_1_1michael.html" title="Michael&#39;s allocator (class Heap)">cds::memory::michael</a> memory allocator cannot be linked with GCC 4.6 <code>&lt;atomic&gt;</code> header. This error has been fixed in GCC 4.7.</p>
<dl class="section user"><dt>Clang</dt><dd></dd></dl>
<p>The macro <code>CDS_ATOMIC</code> is defined as <code>cds::cxx11_atomic</code> </p>
<dl class="section user"><dt>boost::atomic</dt><dd></dd></dl>
<p><a href="http://boost.org">boost</a> library contains an implementation of atomic started in version 1.53. Unfortunately, this implementation is not fully conformed to C++11 standard and cannot be used with <b>libcds</b>. </p>
</div></div><!-- contents -->
		<hr/>
		<div align="right">
			<b>cds</b> <b>1.4.0</b> 
			Developed by <i>Maxim Khiszinsky aka khizmax</i> 2007 - 2012
			<br/>
			<i>Autogenerated Mon May 20 2013 00:37:58 by Doxygen 1.8.3.1</i>
		</div>
	</BODY>
</HTML>
