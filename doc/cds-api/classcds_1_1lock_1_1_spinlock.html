<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>cds: cds::lock::Spinlock&lt; Backoff &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cds
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecds.html">cds</a></li><li class="navelem"><a class="el" href="namespacecds_1_1lock.html">lock</a></li><li class="navelem"><a class="el" href="classcds_1_1lock_1_1_spinlock.html">Spinlock</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">cds::lock::Spinlock&lt; Backoff &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Spin lock.  
 <a href="classcds_1_1lock_1_1_spinlock.html#details">More...</a></p>

<p><code>#include &lt;cds/lock/spinlock.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ac915490d7510c1e7db818aeec00c1e13"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac915490d7510c1e7db818aeec00c1e13"></a>
typedef Backoff&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#ac915490d7510c1e7db818aeec00c1e13">backoff_strategy</a></td></tr>
<tr class="memdesc:ac915490d7510c1e7db818aeec00c1e13"><td class="mdescLeft">&#160;</td><td class="mdescRight">back-off strategy type <br/></td></tr>
<tr class="separator:ac915490d7510c1e7db818aeec00c1e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a97d547ffc56f09ac0fa325fa88d3f344"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a97d547ffc56f09ac0fa325fa88d3f344"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#a97d547ffc56f09ac0fa325fa88d3f344">Spinlock</a> () noexcept()</td></tr>
<tr class="memdesc:a97d547ffc56f09ac0fa325fa88d3f344"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct free (unlocked) spin-lock. <br/></td></tr>
<tr class="separator:a97d547ffc56f09ac0fa325fa88d3f344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2abeba9d96f9f35c3e29edf2d7f5d2c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#a2abeba9d96f9f35c3e29edf2d7f5d2c7">Spinlock</a> (bool bLocked) noexcept()</td></tr>
<tr class="memdesc:a2abeba9d96f9f35c3e29edf2d7f5d2c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct spin-lock in specified state.  <a href="#a2abeba9d96f9f35c3e29edf2d7f5d2c7">More...</a><br/></td></tr>
<tr class="separator:a2abeba9d96f9f35c3e29edf2d7f5d2c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd8aa22d00ec820ebedb10e163370b73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#acd8aa22d00ec820ebedb10e163370b73">Spinlock</a> (const <a class="el" href="classcds_1_1lock_1_1_spinlock.html">Spinlock</a>&lt; Backoff &gt; &amp;) noexcept()</td></tr>
<tr class="memdesc:acd8aa22d00ec820ebedb10e163370b73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dummy copy constructor.  <a href="#acd8aa22d00ec820ebedb10e163370b73">More...</a><br/></td></tr>
<tr class="separator:acd8aa22d00ec820ebedb10e163370b73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8199f6e47fbf577cb82f82883a026759"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8199f6e47fbf577cb82f82883a026759"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#a8199f6e47fbf577cb82f82883a026759">~Spinlock</a> ()</td></tr>
<tr class="memdesc:a8199f6e47fbf577cb82f82883a026759"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. On debug time it checks whether spin-lock is free. <br/></td></tr>
<tr class="separator:a8199f6e47fbf577cb82f82883a026759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a516ad6ee3cfa89be53deeefe6e33f8d4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a516ad6ee3cfa89be53deeefe6e33f8d4"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#a516ad6ee3cfa89be53deeefe6e33f8d4">is_locked</a> () const noexcept()</td></tr>
<tr class="memdesc:a516ad6ee3cfa89be53deeefe6e33f8d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the spin is locked. <br/></td></tr>
<tr class="separator:a516ad6ee3cfa89be53deeefe6e33f8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c8b0e887e6ecde39c5b21a0b76800e8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#a0c8b0e887e6ecde39c5b21a0b76800e8">try_lock</a> () noexcept()</td></tr>
<tr class="memdesc:a0c8b0e887e6ecde39c5b21a0b76800e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock the object.  <a href="#a0c8b0e887e6ecde39c5b21a0b76800e8">More...</a><br/></td></tr>
<tr class="separator:a0c8b0e887e6ecde39c5b21a0b76800e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ac266a5519395fcd1400157fd16ef98"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5ac266a5519395fcd1400157fd16ef98"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#a5ac266a5519395fcd1400157fd16ef98">tryLock</a> () noexcept()</td></tr>
<tr class="memdesc:a5ac266a5519395fcd1400157fd16ef98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock the object (synonym for <a class="el" href="classcds_1_1lock_1_1_spinlock.html#a0c8b0e887e6ecde39c5b21a0b76800e8">try_lock</a>) <br/></td></tr>
<tr class="separator:a5ac266a5519395fcd1400157fd16ef98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9352f0df715cddaa5536a4115e9e19b2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#a9352f0df715cddaa5536a4115e9e19b2">try_lock</a> (unsigned int nTryCount) noexcept()</td></tr>
<tr class="memdesc:a9352f0df715cddaa5536a4115e9e19b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock the object, repeat <code>nTryCount</code> times if failed.  <a href="#a9352f0df715cddaa5536a4115e9e19b2">More...</a><br/></td></tr>
<tr class="separator:a9352f0df715cddaa5536a4115e9e19b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ef4dc962c1d2e5b4f18e7469141ffa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af2ef4dc962c1d2e5b4f18e7469141ffa"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#af2ef4dc962c1d2e5b4f18e7469141ffa">tryLock</a> (unsigned int nTryCount) noexcept()</td></tr>
<tr class="memdesc:af2ef4dc962c1d2e5b4f18e7469141ffa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock the object (synonym for <a class="el" href="classcds_1_1lock_1_1_spinlock.html#a0c8b0e887e6ecde39c5b21a0b76800e8">try_lock</a>) <br/></td></tr>
<tr class="separator:af2ef4dc962c1d2e5b4f18e7469141ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb20fa550425094c8620ece3e01b3ea4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeb20fa550425094c8620ece3e01b3ea4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#aeb20fa550425094c8620ece3e01b3ea4">lock</a> () noexcept()</td></tr>
<tr class="memdesc:aeb20fa550425094c8620ece3e01b3ea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the spin-lock. Waits infinitely while spin-lock is locked. Debug version: deadlock may be detected. <br/></td></tr>
<tr class="separator:aeb20fa550425094c8620ece3e01b3ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6593bb062977e052aa42ce3554c8445"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab6593bb062977e052aa42ce3554c8445"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#ab6593bb062977e052aa42ce3554c8445">unlock</a> () noexcept()</td></tr>
<tr class="memdesc:ab6593bb062977e052aa42ce3554c8445"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the spin-lock. Debug version: deadlock may be detected. <br/></td></tr>
<tr class="separator:ab6593bb062977e052aa42ce3554c8445"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad05159addaa86f4a4a36995c4778dfa1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad05159addaa86f4a4a36995c4778dfa1"></a>
std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1_spinlock.html#ad05159addaa86f4a4a36995c4778dfa1">m_spin</a></td></tr>
<tr class="memdesc:ad05159addaa86f4a4a36995c4778dfa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Spin. <br/></td></tr>
<tr class="separator:ad05159addaa86f4a4a36995c4778dfa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class Backoff&gt;<br/>
class cds::lock::Spinlock&lt; Backoff &gt;</h3>

<p>Spin lock. </p>
<p>Simple and light-weight spin-lock critical section It is useful to gain access to small (short-timed) code</p>
<p>Algorithm:</p>
<p>TATAS (test-and-test-and-lock) [1984] L. Rudolph, Z. Segall. Dynamic Decentralized Cache Schemes for MIMD Parallel Processors.</p>
<p>No serialization performed - any of waiting threads may owns the spin-lock. This spin-lock is NOT recursive: the thread owned the lock cannot call <a class="el" href="classcds_1_1lock_1_1_spinlock.html#aeb20fa550425094c8620ece3e01b3ea4" title="Lock the spin-lock. Waits infinitely while spin-lock is locked. Debug version: deadlock may be detect...">lock()</a> method withod deadlock. The method <a class="el" href="classcds_1_1lock_1_1_spinlock.html#ab6593bb062977e052aa42ce3554c8445" title="Unlock the spin-lock. Debug version: deadlock may be detected.">unlock()</a> can call any thread</p>
<p>DEBUG version: The spinlock stores owner thead id. Assertion is raised when:</p>
<ul>
<li>double lock attempt encountered by same thread (deadlock)</li>
<li>unlock by another thread</li>
</ul>
<p>If spin-lock is locked the Backoff algorithm is called. Predefined <a class="el" href="namespacecds_1_1backoff.html#a42efe4d5690bfb85c702b6aadccc3d68" title="Default back-off strategy for lock primitives.">backoff::LockDefault</a> class yields current thread and repeats lock attempts later</p>
<p>Template parameters:</p>
<ul>
<li><code>Backoff</code> backoff strategy. Used when spin lock is locked </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2abeba9d96f9f35c3e29edf2d7f5d2c7"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Backoff &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcds_1_1lock_1_1_spinlock.html">cds::lock::Spinlock</a>&lt; Backoff &gt;::<a class="el" href="classcds_1_1lock_1_1_spinlock.html">Spinlock</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bLocked</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct spin-lock in specified state. </p>
<p>In debug mode: if <code>bLocked</code> = true then spin-lock is made owned by current thread </p>

</div>
</div>
<a class="anchor" id="acd8aa22d00ec820ebedb10e163370b73"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Backoff &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcds_1_1lock_1_1_spinlock.html">cds::lock::Spinlock</a>&lt; Backoff &gt;::<a class="el" href="classcds_1_1lock_1_1_spinlock.html">Spinlock</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcds_1_1lock_1_1_spinlock.html">Spinlock</a>&lt; Backoff &gt; &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dummy copy constructor. </p>
<p>In theory, spin-lock cannot be copied. However, it is not practical. Therefore, we provide dummy copy constructor that do no copy in fact. The ctor initializes the spin to free (unlocked) state like default ctor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0c8b0e887e6ecde39c5b21a0b76800e8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Backoff &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classcds_1_1lock_1_1_spinlock.html">cds::lock::Spinlock</a>&lt; Backoff &gt;::try_lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to lock the object. </p>
<p>Returns <code>true</code> if locking is succeeded otherwise (if the spin is already locked) returns <code>false</code> </p>
<p>Debug version: deadlock can be detected </p>

</div>
</div>
<a class="anchor" id="a9352f0df715cddaa5536a4115e9e19b2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Backoff &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classcds_1_1lock_1_1_spinlock.html">cds::lock::Spinlock</a>&lt; Backoff &gt;::try_lock </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nTryCount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to lock the object, repeat <code>nTryCount</code> times if failed. </p>
<p>Returns <code>true</code> if locking is succeeded otherwise (if the spin is already locked) returns <code>false</code> </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cds/lock/spinlock.h</li>
</ul>
</div><!-- contents -->
		<hr/>
		<div align="right">
			<b>cds</b> <b>1.4.0</b> 
			Developed by <i>Maxim Khiszinsky aka khizmax</i> 2007 - 2012
			<br/>
			<i>Autogenerated Mon May 20 2013 00:38:01 by Doxygen 1.8.3.1</i>
		</div>
	</BODY>
</HTML>
