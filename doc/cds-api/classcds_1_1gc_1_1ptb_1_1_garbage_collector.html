<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>cds: cds::gc::ptb::GarbageCollector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cds
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecds.html">cds</a></li><li class="navelem"><a class="el" href="namespacecds_1_1gc.html">gc</a></li><li class="navelem"><a class="el" href="namespacecds_1_1gc_1_1ptb.html">ptb</a></li><li class="navelem"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">cds::gc::ptb::GarbageCollector Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Memory manager (Garbage collector)  
 <a href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#details">More...</a></p>

<p><code>#include &lt;cds/gc/ptb/ptb.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html">InternalState</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal GC statistics.  <a href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9849e1e0c0ac0b2a02f959382e9036b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9849e1e0c0ac0b2a02f959382e9036b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#ac9849e1e0c0ac0b2a02f959382e9036b">CDS_DECLARE_EXCEPTION</a> (PTBManagerEmpty,&quot;Global <a class="el" href="classcds_1_1gc_1_1_p_t_b.html">PTB</a> <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a> is NULL&quot;)</td></tr>
<tr class="memdesc:ac9849e1e0c0ac0b2a02f959382e9036b"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classcds_1_1_exception.html" title="Base of all exceptions in the library.">Exception</a> "No GarbageCollector object is created". <br/></td></tr>
<tr class="separator:ac9849e1e0c0ac0b2a02f959382e9036b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6cbefdfbc11ed9ad6178a8955d2e5a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b6cbefdfbc11ed9ad6178a8955d2e5a"></a>
<a class="el" href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html">InternalState</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a4b6cbefdfbc11ed9ad6178a8955d2e5a">getInternalState</a> (<a class="el" href="structcds_1_1gc_1_1ptb_1_1_garbage_collector_1_1_internal_state.html">InternalState</a> &amp;stat) const </td></tr>
<tr class="memdesc:a4b6cbefdfbc11ed9ad6178a8955d2e5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get internal statistics. <br/></td></tr>
<tr class="separator:a4b6cbefdfbc11ed9ad6178a8955d2e5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb40785512225a7cc1b3cd2aac0b5b90"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acb40785512225a7cc1b3cd2aac0b5b90"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#acb40785512225a7cc1b3cd2aac0b5b90">isStatisticsEnabled</a> () const </td></tr>
<tr class="memdesc:acb40785512225a7cc1b3cd2aac0b5b90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if internal statistics enabled. <br/></td></tr>
<tr class="separator:acb40785512225a7cc1b3cd2aac0b5b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab93d7a7b89e4d9721aa71dd7f7988fa8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab93d7a7b89e4d9721aa71dd7f7988fa8"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#ab93d7a7b89e4d9721aa71dd7f7988fa8">enableStatistics</a> (bool bEnable)</td></tr>
<tr class="memdesc:ab93d7a7b89e4d9721aa71dd7f7988fa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables/disables internal statistics. <br/></td></tr>
<tr class="separator:ab93d7a7b89e4d9721aa71dd7f7988fa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa134fe819c03b3287ec480c0e9070b67"><td class="memItemLeft" align="right" valign="top">static void CDS_STDCALL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#aa134fe819c03b3287ec480c0e9070b67">Construct</a> (size_t nLiberateThreshold=1024, size_t nInitialThreadGuardCount=8)</td></tr>
<tr class="memdesc:aa134fe819c03b3287ec480c0e9070b67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">PTB</a> memory manager singleton.  <a href="#aa134fe819c03b3287ec480c0e9070b67">More...</a><br/></td></tr>
<tr class="separator:aa134fe819c03b3287ec480c0e9070b67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca8282ef97000c6892a6a409f29b8b95"><td class="memItemLeft" align="right" valign="top">static void CDS_STDCALL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#aca8282ef97000c6892a6a409f29b8b95">Destruct</a> ()</td></tr>
<tr class="memdesc:aca8282ef97000c6892a6a409f29b8b95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">PTB</a> memory manager.  <a href="#aca8282ef97000c6892a6a409f29b8b95">More...</a><br/></td></tr>
<tr class="separator:aca8282ef97000c6892a6a409f29b8b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e7be5aec4135783ae8446aa3881920a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a3e7be5aec4135783ae8446aa3881920a">instance</a> ()</td></tr>
<tr class="memdesc:a3e7be5aec4135783ae8446aa3881920a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns pointer to <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html" title="Memory manager (Garbage collector)">GarbageCollector</a> instance.  <a href="#a3e7be5aec4135783ae8446aa3881920a">More...</a><br/></td></tr>
<tr class="separator:a3e7be5aec4135783ae8446aa3881920a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ba026d76885a7aad59a2970d1270221"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7ba026d76885a7aad59a2970d1270221"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7ba026d76885a7aad59a2970d1270221">isUsed</a> () noexcept()</td></tr>
<tr class="memdesc:a7ba026d76885a7aad59a2970d1270221"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if global GC object is constructed and may be used. <br/></td></tr>
<tr class="separator:a7ba026d76885a7aad59a2970d1270221"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a9e122250a9ed4a20e7861f6137cd107f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e122250a9ed4a20e7861f6137cd107f"></a>
<a class="el" href="classcds_1_1gc_1_1ptb_1_1details_1_1guard__allocator.html">details::guard_allocator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a9e122250a9ed4a20e7861f6137cd107f">m_GuardPool</a></td></tr>
<tr class="memdesc:a9e122250a9ed4a20e7861f6137cd107f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_guard.html" title="Guard.">Guard</a> pool. <br/></td></tr>
<tr class="separator:a9e122250a9ed4a20e7861f6137cd107f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6475b77441a476ce1fd586cb6b395c78"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6475b77441a476ce1fd586cb6b395c78"></a>
<a class="el" href="classcds_1_1gc_1_1ptb_1_1details_1_1retired__ptr__pool.html">details::retired_ptr_pool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a6475b77441a476ce1fd586cb6b395c78">m_RetiredAllocator</a></td></tr>
<tr class="memdesc:a6475b77441a476ce1fd586cb6b395c78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pool of free retired pointers. <br/></td></tr>
<tr class="separator:a6475b77441a476ce1fd586cb6b395c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf393aeb8c20fb9c6a63de4a4f226a1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afcf393aeb8c20fb9c6a63de4a4f226a1"></a>
<a class="el" href="classcds_1_1gc_1_1ptb_1_1details_1_1retired__ptr__buffer.html">details::retired_ptr_buffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#afcf393aeb8c20fb9c6a63de4a4f226a1">m_RetiredBuffer</a></td></tr>
<tr class="memdesc:afcf393aeb8c20fb9c6a63de4a4f226a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retired pointer buffer for liberating. <br/></td></tr>
<tr class="separator:afcf393aeb8c20fb9c6a63de4a4f226a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5297322dca44cc9b160fab9d49c915f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5297322dca44cc9b160fab9d49c915f"></a>
std::atomic&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#ab5297322dca44cc9b160fab9d49c915f">m_nLiberateThreshold</a></td></tr>
<tr class="memdesc:ab5297322dca44cc9b160fab9d49c915f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max size of retired pointer buffer to call liberate. <br/></td></tr>
<tr class="separator:ab5297322dca44cc9b160fab9d49c915f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af299286905156dac03ce9308f2d4db88"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af299286905156dac03ce9308f2d4db88"></a>
const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#af299286905156dac03ce9308f2d4db88">m_nInitialThreadGuardCount</a></td></tr>
<tr class="memdesc:af299286905156dac03ce9308f2d4db88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initial count of guards allocated for <a class="el" href="classcds_1_1gc_1_1ptb_1_1_thread_g_c.html" title="Thread GC.">ThreadGC</a>. <br/></td></tr>
<tr class="separator:af299286905156dac03ce9308f2d4db88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0289e716c5792c571c49c3968441cae7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0289e716c5792c571c49c3968441cae7"></a>
internal_stat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a0289e716c5792c571c49c3968441cae7">m_stat</a></td></tr>
<tr class="memdesc:a0289e716c5792c571c49c3968441cae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal statistics. <br/></td></tr>
<tr class="separator:a0289e716c5792c571c49c3968441cae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aed83517a3791a1bbc1557f6575d9b0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7aed83517a3791a1bbc1557f6575d9b0"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7aed83517a3791a1bbc1557f6575d9b0">m_bStatEnabled</a></td></tr>
<tr class="memdesc:a7aed83517a3791a1bbc1557f6575d9b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal Statistics enabled. <br/></td></tr>
<tr class="separator:a7aed83517a3791a1bbc1557f6575d9b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a80c30535f7d8b606fd11b5bf4388837c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a80c30535f7d8b606fd11b5bf4388837c"></a>
static <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a80c30535f7d8b606fd11b5bf4388837c">m_pManager</a></td></tr>
<tr class="memdesc:a80c30535f7d8b606fd11b5bf4388837c"><td class="mdescLeft">&#160;</td><td class="mdescRight">GC global instance. <br/></td></tr>
<tr class="separator:a80c30535f7d8b606fd11b5bf4388837c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37de38bb1d420c2aec2d7d5150d95fa7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a37de38bb1d420c2aec2d7d5150d95fa7">allocGuard</a> ()</td></tr>
<tr class="memdesc:a37de38bb1d420c2aec2d7d5150d95fa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal interface.  <a href="#a37de38bb1d420c2aec2d7d5150d95fa7">More...</a><br/></td></tr>
<tr class="separator:a37de38bb1d420c2aec2d7d5150d95fa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f9c9aa951b763fc8bf8c4769a6eb81c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f9c9aa951b763fc8bf8c4769a6eb81c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a3f9c9aa951b763fc8bf8c4769a6eb81c">freeGuard</a> (<a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a> *pGuard)</td></tr>
<tr class="memdesc:a3f9c9aa951b763fc8bf8c4769a6eb81c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees guard <code>g</code> for reusing in future. <br/></td></tr>
<tr class="separator:a3f9c9aa951b763fc8bf8c4769a6eb81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a983aaf5e1284702a26dcb2d2426e1e6b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a983aaf5e1284702a26dcb2d2426e1e6b"></a>
<a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a983aaf5e1284702a26dcb2d2426e1e6b">allocGuardList</a> (size_t nCount)</td></tr>
<tr class="memdesc:a983aaf5e1284702a26dcb2d2426e1e6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates guard list for a thread. <br/></td></tr>
<tr class="separator:a983aaf5e1284702a26dcb2d2426e1e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a394699dc369302390ca1f4852d96bc79"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a394699dc369302390ca1f4852d96bc79"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a394699dc369302390ca1f4852d96bc79">freeGuardList</a> (<a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a> *pList)</td></tr>
<tr class="memdesc:a394699dc369302390ca1f4852d96bc79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees thread's guard list pointed by <code>pList</code>. <br/></td></tr>
<tr class="separator:a394699dc369302390ca1f4852d96bc79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c9eb81267aa80bea611d49a1952dc8"><td class="memTemplParams" colspan="2"><a class="anchor" id="a09c9eb81267aa80bea611d49a1952dc8"></a>
template&lt;typename T &gt; </td></tr>
<tr class="memitem:a09c9eb81267aa80bea611d49a1952dc8"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a09c9eb81267aa80bea611d49a1952dc8">retirePtr</a> (T *p, void(*pFunc)(T *))</td></tr>
<tr class="memdesc:a09c9eb81267aa80bea611d49a1952dc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Places retired pointer <code>and</code> its deleter <code>pFunc</code> into thread's array of retired pointer for deferred reclamation. <br/></td></tr>
<tr class="separator:a09c9eb81267aa80bea611d49a1952dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7deece3a1d6e31a74697d41c1d00b15f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7deece3a1d6e31a74697d41c1d00b15f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7deece3a1d6e31a74697d41c1d00b15f">retirePtr</a> (const <a class="el" href="namespacecds_1_1gc_1_1ptb.html#afd44387438015c3ff5b56d678c04d16f">retired_ptr</a> &amp;p)</td></tr>
<tr class="memdesc:a7deece3a1d6e31a74697d41c1d00b15f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Places retired pointer <code>into</code> thread's array of retired pointer for deferred reclamation. <br/></td></tr>
<tr class="separator:a7deece3a1d6e31a74697d41c1d00b15f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e97919ce25403475bd6348aa55918da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7e97919ce25403475bd6348aa55918da">liberate</a> ()</td></tr>
<tr class="memdesc:a7e97919ce25403475bd6348aa55918da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Liberate function.  <a href="#a7e97919ce25403475bd6348aa55918da">More...</a><br/></td></tr>
<tr class="separator:a7e97919ce25403475bd6348aa55918da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Memory manager (Garbage collector) </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a37de38bb1d420c2aec2d7d5150d95fa7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcds_1_1gc_1_1ptb_1_1details_1_1guard__data.html">details::guard_data</a>* cds::gc::ptb::GarbageCollector::allocGuard </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal interface. </p>
<p>Allocates a guard </p>

</div>
</div>
<a class="anchor" id="aa134fe819c03b3287ec480c0e9070b67"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void CDS_STDCALL cds::gc::ptb::GarbageCollector::Construct </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nLiberateThreshold</em> = <code>1024</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nInitialThreadGuardCount</em> = <code>8</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">PTB</a> memory manager singleton. </p>
<p>This member function creates and initializes <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">PTB</a> global object. The function should be called before using CDS data structure based on <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">cds::gc::PTB</a> GC. Usually, this member function is called in the <code>main()</code> function. See <a class="el" href="namespacecds_1_1gc_1_1ptb.html" title="Pass The Buck reclamation schema.">cds::gc::ptb</a> for example. After calling of this function you may use CDS data structures based on <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">cds::gc::PTB</a>.</p>
<dl class="section user"><dt>Parameters</dt><dd><ul>
<li><code>nLiberateThreshold</code> - the liberate threshold. When count of retired pointers reaches this value, the <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a7e97919ce25403475bd6348aa55918da">liberate</a> member function would be called for freeing retired pointers. If <code>nLiberateThreshold</code> &lt;= 1, <code>liberate</code> would called after each <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html#a09c9eb81267aa80bea611d49a1952dc8">retirePtr</a> call. </li>
<li><code>nInitialThreadGuardCount</code> - initial count of guard allocated for <a class="el" href="classcds_1_1gc_1_1ptb_1_1_thread_g_c.html" title="Thread GC.">ThreadGC</a>. When a thread is initialized the GC allocates local guard pool for the thread from common guard pool. By perforce the local thread's guard pool is grown automatically from common pool. When the thread terminated its guard pool is backed to common GC's pool. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="aca8282ef97000c6892a6a409f29b8b95"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void CDS_STDCALL cds::gc::ptb::GarbageCollector::Destruct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroys <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">PTB</a> memory manager. </p>
<p>The member function destroys <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">PTB</a> global object. After calling of this function you may <b>NOT</b> use CDS data structures based on <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">cds::gc::PTB</a>. Usually, the <code>Destruct</code> function is called at the end of your <code>main()</code>. See <a class="el" href="namespacecds_1_1gc_1_1ptb.html" title="Pass The Buck reclamation schema.">cds::gc::ptb</a> for example. </p>

</div>
</div>
<a class="anchor" id="a3e7be5aec4135783ae8446aa3881920a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html">GarbageCollector</a>&amp; cds::gc::ptb::GarbageCollector::instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns pointer to <a class="el" href="classcds_1_1gc_1_1ptb_1_1_garbage_collector.html" title="Memory manager (Garbage collector)">GarbageCollector</a> instance. </p>
<p>If <a class="el" href="classcds_1_1gc_1_1_p_t_b.html" title="Pass-the-Buck garbage collector.">PTB</a> GC is not initialized, <code>PTBManagerEmpty</code> exception is thrown </p>

</div>
</div>
<a class="anchor" id="a7e97919ce25403475bd6348aa55918da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cds::gc::ptb::GarbageCollector::liberate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Liberate function. </p>
<p>The main function of Pass The Buck algorithm. It tries to free retired pointers if they are not trapped by any guard. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cds/gc/ptb/ptb.h</li>
</ul>
</div><!-- contents -->
		<hr/>
		<div align="right">
			<b>cds</b> <b>1.4.0</b> 
			Developed by <i>Maxim Khiszinsky aka khizmax</i> 2007 - 2012
			<br/>
			<i>Autogenerated Mon May 20 2013 00:37:59 by Doxygen 1.8.3.1</i>
		</div>
	</BODY>
</HTML>
