<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>cds: cds::lock::array&lt; Lock, SelectPolicy, Alloc &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cds
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecds.html">cds</a></li><li class="navelem"><a class="el" href="namespacecds_1_1lock.html">lock</a></li><li class="navelem"><a class="el" href="classcds_1_1lock_1_1array.html">array</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">cds::lock::array&lt; Lock, SelectPolicy, Alloc &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Array of locks.  
 <a href="classcds_1_1lock_1_1array.html#details">More...</a></p>

<p><code>#include &lt;cds/lock/array.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a0e9b4271ac1184b8b251b58bd379c1aa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0e9b4271ac1184b8b251b58bd379c1aa"></a>
typedef Lock&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a0e9b4271ac1184b8b251b58bd379c1aa">lock_type</a></td></tr>
<tr class="memdesc:a0e9b4271ac1184b8b251b58bd379c1aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">lock type <br/></td></tr>
<tr class="separator:a0e9b4271ac1184b8b251b58bd379c1aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a454911dc6ce65a0aa54f08adf8372305"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a454911dc6ce65a0aa54f08adf8372305"></a>
typedef SelectPolicy&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a454911dc6ce65a0aa54f08adf8372305">select_cell_policy</a></td></tr>
<tr class="memdesc:a454911dc6ce65a0aa54f08adf8372305"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cell selection policy functor. <br/></td></tr>
<tr class="separator:a454911dc6ce65a0aa54f08adf8372305"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adb4a42146c85334dfc858d0727ef0d9b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#adb4a42146c85334dfc858d0727ef0d9b">array</a> (size_t nCapacity)</td></tr>
<tr class="memdesc:adb4a42146c85334dfc858d0727ef0d9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs array of locks.  <a href="#adb4a42146c85334dfc858d0727ef0d9b">More...</a><br/></td></tr>
<tr class="separator:adb4a42146c85334dfc858d0727ef0d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4fd883e56610e06c1ccaf15ca0058d8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#aa4fd883e56610e06c1ccaf15ca0058d8">array</a> (size_t nCapacity, <a class="el" href="classcds_1_1lock_1_1array.html#a454911dc6ce65a0aa54f08adf8372305">select_cell_policy</a> const &amp;policy)</td></tr>
<tr class="memdesc:aa4fd883e56610e06c1ccaf15ca0058d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs array of lock and copy cell selection policy.  <a href="#aa4fd883e56610e06c1ccaf15ca0058d8">More...</a><br/></td></tr>
<tr class="separator:aa4fd883e56610e06c1ccaf15ca0058d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a80a994a6d31d475333567544bb503e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a0a80a994a6d31d475333567544bb503e">array</a> (size_t nCapacity, <a class="el" href="classcds_1_1lock_1_1array.html#a454911dc6ce65a0aa54f08adf8372305">select_cell_policy</a> &amp;&amp;policy)</td></tr>
<tr class="memdesc:a0a80a994a6d31d475333567544bb503e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs array of lock and move cell selection policy.  <a href="#a0a80a994a6d31d475333567544bb503e">More...</a><br/></td></tr>
<tr class="separator:a0a80a994a6d31d475333567544bb503e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10b2b289675fccf60e7111263dcde530"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10b2b289675fccf60e7111263dcde530"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a10b2b289675fccf60e7111263dcde530">~array</a> ()</td></tr>
<tr class="memdesc:a10b2b289675fccf60e7111263dcde530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructs array of locks and frees used memory. <br/></td></tr>
<tr class="separator:a10b2b289675fccf60e7111263dcde530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c13b4290139ea9ad1d21d6b10b47763"><td class="memTemplParams" colspan="2">template&lt;typename Q &gt; </td></tr>
<tr class="memitem:a5c13b4290139ea9ad1d21d6b10b47763"><td class="memTemplItemLeft" align="right" valign="top">size_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a5c13b4290139ea9ad1d21d6b10b47763">lock</a> (Q const &amp;hint)</td></tr>
<tr class="memdesc:a5c13b4290139ea9ad1d21d6b10b47763"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks a lock at cell <code>hint</code>.  <a href="#a5c13b4290139ea9ad1d21d6b10b47763">More...</a><br/></td></tr>
<tr class="separator:a5c13b4290139ea9ad1d21d6b10b47763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85f3f7d4d39cf4a3b8ad955757a4726a"><td class="memTemplParams" colspan="2">template&lt;typename Q &gt; </td></tr>
<tr class="memitem:a85f3f7d4d39cf4a3b8ad955757a4726a"><td class="memTemplItemLeft" align="right" valign="top">size_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a85f3f7d4d39cf4a3b8ad955757a4726a">try_lock</a> (Q const &amp;hint)</td></tr>
<tr class="memdesc:a85f3f7d4d39cf4a3b8ad955757a4726a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try lock a lock at cell <code>hint</code>.  <a href="#a85f3f7d4d39cf4a3b8ad955757a4726a">More...</a><br/></td></tr>
<tr class="separator:a85f3f7d4d39cf4a3b8ad955757a4726a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22f22ced9b3eee69bbfb1a648a2149c8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a22f22ced9b3eee69bbfb1a648a2149c8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a22f22ced9b3eee69bbfb1a648a2149c8">unlock</a> (size_t nCell)</td></tr>
<tr class="memdesc:a22f22ced9b3eee69bbfb1a648a2149c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the lock specified by index <code>nCell</code>. <br/></td></tr>
<tr class="separator:a22f22ced9b3eee69bbfb1a648a2149c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8b843a5f6a2a665b654b1d0a1a36556"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac8b843a5f6a2a665b654b1d0a1a36556"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#ac8b843a5f6a2a665b654b1d0a1a36556">lock_all</a> ()</td></tr>
<tr class="memdesc:ac8b843a5f6a2a665b654b1d0a1a36556"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock all. <br/></td></tr>
<tr class="separator:ac8b843a5f6a2a665b654b1d0a1a36556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41dafc8745820dc02c87c99dd44ddaef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a41dafc8745820dc02c87c99dd44ddaef"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a41dafc8745820dc02c87c99dd44ddaef">unlock_all</a> ()</td></tr>
<tr class="memdesc:a41dafc8745820dc02c87c99dd44ddaef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock all. <br/></td></tr>
<tr class="separator:a41dafc8745820dc02c87c99dd44ddaef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcdd499f39bc19bfbeab492d77e2a242"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcds_1_1lock_1_1array.html#a0e9b4271ac1184b8b251b58bd379c1aa">lock_type</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#afcdd499f39bc19bfbeab492d77e2a242">at</a> (size_t nCell) const </td></tr>
<tr class="memdesc:afcdd499f39bc19bfbeab492d77e2a242"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get lock at cell <code>nCell</code>.  <a href="#afcdd499f39bc19bfbeab492d77e2a242">More...</a><br/></td></tr>
<tr class="separator:afcdd499f39bc19bfbeab492d77e2a242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddeccbac3061c0c516fc6d1e468941f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ddeccbac3061c0c516fc6d1e468941f"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a0ddeccbac3061c0c516fc6d1e468941f">size</a> () const </td></tr>
<tr class="memdesc:a0ddeccbac3061c0c516fc6d1e468941f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of lock array. <br/></td></tr>
<tr class="separator:a0ddeccbac3061c0c516fc6d1e468941f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a3c640cdf0939cf947cc4e23600226e72"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3c640cdf0939cf947cc4e23600226e72"></a>
static size_t const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a3c640cdf0939cf947cc4e23600226e72">c_nUnspecifiedCell</a> = (size_t) -1</td></tr>
<tr class="memdesc:a3c640cdf0939cf947cc4e23600226e72"><td class="mdescLeft">&#160;</td><td class="mdescRight">failed <a class="el" href="classcds_1_1lock_1_1array.html#a85f3f7d4d39cf4a3b8ad955757a4726a">try_lock</a> call result <br/></td></tr>
<tr class="separator:a3c640cdf0939cf947cc4e23600226e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a7bef4b0553e92b06843a672c7f5b55bb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7bef4b0553e92b06843a672c7f5b55bb"></a>
<a class="el" href="classcds_1_1lock_1_1array.html#a0e9b4271ac1184b8b251b58bd379c1aa">lock_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a7bef4b0553e92b06843a672c7f5b55bb">m_arrLocks</a></td></tr>
<tr class="memdesc:a7bef4b0553e92b06843a672c7f5b55bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">lock array <br/></td></tr>
<tr class="separator:a7bef4b0553e92b06843a672c7f5b55bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90aa1fc2af418ce35a51d54683782736"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a90aa1fc2af418ce35a51d54683782736"></a>
size_t const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a90aa1fc2af418ce35a51d54683782736">m_nCapacity</a></td></tr>
<tr class="memdesc:a90aa1fc2af418ce35a51d54683782736"><td class="mdescLeft">&#160;</td><td class="mdescRight">array capacity <br/></td></tr>
<tr class="separator:a90aa1fc2af418ce35a51d54683782736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64b866fb0019b9f2da8b5190ff7688ea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64b866fb0019b9f2da8b5190ff7688ea"></a>
<a class="el" href="classcds_1_1lock_1_1array.html#a454911dc6ce65a0aa54f08adf8372305">select_cell_policy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcds_1_1lock_1_1array.html#a64b866fb0019b9f2da8b5190ff7688ea">m_SelectCellPolicy</a></td></tr>
<tr class="memdesc:a64b866fb0019b9f2da8b5190ff7688ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cell selection policy. <br/></td></tr>
<tr class="separator:a64b866fb0019b9f2da8b5190ff7688ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Lock, typename SelectPolicy = mod_select_policy, class Alloc = CDS_DEFAULT_ALLOCATOR&gt;<br/>
class cds::lock::array&lt; Lock, SelectPolicy, Alloc &gt;</h3>

<p>Array of locks. </p>
<p>The lock array is useful for building fine-grained lock-based data structure based on striping technique. Instead of locking access to data struct (a hash map, for example) at whole, the striping locks only part of the map (a bucket). So, access to different buckets can be simultaneous.</p>
<p>Template arguments:</p>
<ul>
<li><code>Lock</code> - lock type, for example, <code>boost::mutex</code>, <code><a class="el" href="classcds_1_1lock_1_1_spinlock.html" title="Spin lock.">cds::lock::Spinlock</a></code> </li>
<li><code>SelectPolicy</code> - array cell selection policy, the default is <a class="el" href="structcds_1_1lock_1_1mod__select__policy.html">mod_select_policy</a> Available policies: <a class="el" href="structcds_1_1lock_1_1trivial__select__policy.html">trivial_select_policy</a>, <a class="el" href="structcds_1_1lock_1_1pow2__select__policy.html">pow2_select_policy</a>, <a class="el" href="structcds_1_1lock_1_1mod__select__policy.html">mod_select_policy</a>.</li>
<li><code>Alloc</code> - memory allocator for array</li>
</ul>
<p>To determine array's cell the selection policy <code>SelectPolicy</code> functor is used. Two arguments are passed to the policy: </p>
<div class="fragment"><div class="line"><span class="keywordtype">size_t</span> operator()( <span class="keywordtype">size_t</span> nHint, <span class="keywordtype">size_t</span> nCapacity ) <span class="keyword">const</span> </div>
</div><!-- fragment --><ul>
<li><code>nHint</code> - a hint to calculate cell index in the lock array. Usually, it is a hash value.</li>
<li><code>nCapacity</code> - the size of the lock array The functor should return the index in the lock array.</li>
</ul>
<p>Note that the type of <code>nHint</code> parameter can be any. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="adb4a42146c85334dfc858d0727ef0d9b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Lock , typename SelectPolicy  = mod_select_policy, class Alloc  = CDS_DEFAULT_ALLOCATOR&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcds_1_1lock_1_1array.html">cds::lock::array</a>&lt; Lock, SelectPolicy, Alloc &gt;::<a class="el" href="classcds_1_1lock_1_1array.html">array</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nCapacity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs array of locks. </p>
<p>Allocates the array and initializes all locks as unlocked. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nCapacity</td><td>Array size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa4fd883e56610e06c1ccaf15ca0058d8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Lock , typename SelectPolicy  = mod_select_policy, class Alloc  = CDS_DEFAULT_ALLOCATOR&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcds_1_1lock_1_1array.html">cds::lock::array</a>&lt; Lock, SelectPolicy, Alloc &gt;::<a class="el" href="classcds_1_1lock_1_1array.html">array</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nCapacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcds_1_1lock_1_1array.html#a454911dc6ce65a0aa54f08adf8372305">select_cell_policy</a> const &amp;&#160;</td>
          <td class="paramname"><em>policy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs array of lock and copy cell selection policy. </p>
<p>Allocates the array and initializes all locks as unlocked. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nCapacity</td><td>Array size </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">policy</td><td>Cell selection policy (copy-constructible) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0a80a994a6d31d475333567544bb503e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Lock , typename SelectPolicy  = mod_select_policy, class Alloc  = CDS_DEFAULT_ALLOCATOR&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcds_1_1lock_1_1array.html">cds::lock::array</a>&lt; Lock, SelectPolicy, Alloc &gt;::<a class="el" href="classcds_1_1lock_1_1array.html">array</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nCapacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcds_1_1lock_1_1array.html#a454911dc6ce65a0aa54f08adf8372305">select_cell_policy</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>policy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs array of lock and move cell selection policy. </p>
<p>Allocates the array and initializes all locks as unlocked. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nCapacity</td><td>Array size </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">policy</td><td>Cell selection policy (move-constructible) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="afcdd499f39bc19bfbeab492d77e2a242"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Lock , typename SelectPolicy  = mod_select_policy, class Alloc  = CDS_DEFAULT_ALLOCATOR&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcds_1_1lock_1_1array.html#a0e9b4271ac1184b8b251b58bd379c1aa">lock_type</a>&amp; <a class="el" href="classcds_1_1lock_1_1array.html">cds::lock::array</a>&lt; Lock, SelectPolicy, Alloc &gt;::at </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nCell</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get lock at cell <code>nCell</code>. </p>
<p>Precondition: <code>nCell &lt; <a class="el" href="classcds_1_1lock_1_1array.html#a0ddeccbac3061c0c516fc6d1e468941f" title="Size of lock array.">size()</a></code> </p>

</div>
</div>
<a class="anchor" id="a5c13b4290139ea9ad1d21d6b10b47763"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Lock , typename SelectPolicy  = mod_select_policy, class Alloc  = CDS_DEFAULT_ALLOCATOR&gt; </div>
<div class="memtemplate">
template&lt;typename Q &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classcds_1_1lock_1_1array.html">cds::lock::array</a>&lt; Lock, SelectPolicy, Alloc &gt;::lock </td>
          <td>(</td>
          <td class="paramtype">Q const &amp;&#160;</td>
          <td class="paramname"><em>hint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locks a lock at cell <code>hint</code>. </p>
<p>To define real array's cell which should be locked, <a class="el" href="classcds_1_1lock_1_1array.html#a454911dc6ce65a0aa54f08adf8372305">select_cell_policy</a> is used. The target cell is a result of <code>select_cell_policy( hint, <a class="el" href="classcds_1_1lock_1_1array.html#a0ddeccbac3061c0c516fc6d1e468941f" title="Size of lock array.">size()</a> )</code>.</p>
<p>Returns the index of locked lock. </p>

</div>
</div>
<a class="anchor" id="a85f3f7d4d39cf4a3b8ad955757a4726a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Lock , typename SelectPolicy  = mod_select_policy, class Alloc  = CDS_DEFAULT_ALLOCATOR&gt; </div>
<div class="memtemplate">
template&lt;typename Q &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classcds_1_1lock_1_1array.html">cds::lock::array</a>&lt; Lock, SelectPolicy, Alloc &gt;::try_lock </td>
          <td>(</td>
          <td class="paramtype">Q const &amp;&#160;</td>
          <td class="paramname"><em>hint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try lock a lock at cell <code>hint</code>. </p>
<p>To define real array's cell which should be locked, <a class="el" href="classcds_1_1lock_1_1array.html#a454911dc6ce65a0aa54f08adf8372305">select_cell_policy</a> is used. The target cell is a result of <code>select_cell_policy( hint, <a class="el" href="classcds_1_1lock_1_1array.html#a0ddeccbac3061c0c516fc6d1e468941f" title="Size of lock array.">size()</a> )</code>.</p>
<p>Returns the index of locked lock if success, <a class="el" href="classcds_1_1lock_1_1array.html#a3c640cdf0939cf947cc4e23600226e72">c_nUnspecifiedCell</a> constant otherwise. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cds/lock/array.h</li>
</ul>
</div><!-- contents -->
		<hr/>
		<div align="right">
			<b>cds</b> <b>1.4.0</b> 
			Developed by <i>Maxim Khiszinsky aka khizmax</i> 2007 - 2012
			<br/>
			<i>Autogenerated Mon May 20 2013 00:38:01 by Doxygen 1.8.3.1</i>
		</div>
	</BODY>
</HTML>
